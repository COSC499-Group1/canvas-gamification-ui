<div class="container" id="mainContainer">
    <h2 class="my-3">
        Create Event
    </h2>
    <!--TODO: Add aria-labels throughout form (on Opey)-->
    <form (ngSubmit)="submitEvent(formData)" [formGroup]="formData" class="form" id="new-event">
        <div class="form-group">
            <label for="id-name">Event Name</label>
            <input [ngClass]="{ 'is-invalid': form.name.errors && form.name.touched }" class="form-control" formControlName="name" id="id-name" name="name"
                   placeholder="Event Name..." type="text">
            <div *ngIf="form.name.errors" class="invalid-feedback">
                <div *ngIf="form.name.errors.required">Event Name is required</div>
            </div>
        </div>
        <div class="form-group">
            <label for="id-type">Event type</label>
            <select [ngClass]="{ 'is-invalid': form.type.errors && form.type.touched }" class="form-control" formControlName="type" id="id-type"
                    name="type">
                <option disabled selected value="">Select Event Type...</option>
                <ng-container *ngFor="let item of localEventTypes">
                    <option [value]="item[0]">{{item[1]}}</option>
                </ng-container>
            </select>
            <div *ngIf="form.type.errors" class="invalid-feedback">
                <div *ngIf="form.type.errors.required">Event Type is required</div>
            </div>
        </div>
        <div class="form-check my-5">
            <input class="form-check-input" formControlName="countForTokens" id="id-count-for-tokens" name="countForTokens"
                   type="checkbox">
            <label class="form-check-label" for="id-count-for-tokens">Counts for tokens</label>
        </div>
        <div class="form-group">
            <label for="id-name">Start Date & Time</label>
            <mat-form-field>
                <input [ngxMatDatetimePicker]="startPicker" formControlName="startPicker"
                       id="start-date-id"
                       matInput name="startPicker" placeholder="Choose a date">

                <mat-datepicker-toggle [for]="startPicker" matSuffix></mat-datepicker-toggle>
                <ngx-mat-datetime-picker #startPicker
                                         [showSeconds]="false" [stepHour]="1"
                                         [stepMinute]="1" [touchUi]="true">
                </ngx-mat-datetime-picker>
            </mat-form-field>
        </div>
        <div class="form-group">
            <label for="id-name">End Date & Time</label>
            <mat-form-field>
                <input [ngxMatDatetimePicker]="endPicker" formControlName="endPicker"
                       id="end-date-id"
                       matInput name="endPicker" placeholder="Choose a date">
                <mat-datepicker-toggle [for]="endPicker" matSuffix>
                </mat-datepicker-toggle>
                <ngx-mat-datetime-picker #endPicker
                                         [showSeconds]="false" [stepHour]="1"
                                         [stepMinute]="1" [touchUi]="true">
                </ngx-mat-datetime-picker>
            </mat-form-field>
        </div>
        <div class="form-group">
            <button [routerLink]="['/course', courseId]" class="btn btn-primary my-2 mr-3">Back</button>
            <button [disabled]="formData.invalid" class="btn btn-primary my-2 mr-3" id="id-submit" name="submit"
                    type="submit">Submit
            </button>
        </div>
        <div *ngIf="formData.errors?.forbiddenDateRange && (form.startPicker.touched || form.endPicker.touched)"
             class="alert-danger alert">
            Invalid date range! Please check your start and end date!
        </div>
    </form>
</div>
